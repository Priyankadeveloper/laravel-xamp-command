<?php

namespace App\Http\Controllers;


use Illuminate\Http\Request;
use Storage;
use File;
use view;
use App\User;
use Input;

class jsonController extends Controller
{
	public function bulkdata()
	{
		$path = storage_path() . "/json/restaurant.json";//file path
		$lines = file($path);//read file
		$decodedata = json_decode(file_get_contents($path), true);//json to array
		$keys = array_keys($decodedata);
        $last = end($keys);
   
	    $data = [
	         'id' => end($keys)+1,
	         'name' => Input::get("name") ];
	   
		array_push($decodedata,$data);//merge data
		$data = json_encode($decodedata);
		File::put($path,$data);

	}


	public function delete($id)
		{
		$path = storage_path() . "/json/restaurant.json";	
		$decodedata = json_decode(file_get_contents($path), true);
		//print_r($decodedata['4']);die;
		unset($decodedata[$id]);
		$data=json_encode($decodedata);
		File::put($path,$data);
		}
	public function list()
	    {

		$path = storage_path() . "/json/restaurant.json"; //file path
		$member = json_decode(file_get_contents($path), true);//json to array
		return view('restaurant',compact('member')); 

	 }

	public function update($id)
	{
		$path = storage_path() . "/json/restaurant.json"; //file path
		$currentvalue = json_decode(file_get_contents($path), true);//json to array
		$currentvaluep = $currentvalue[$id];
		return view('update',compact('currentvaluep'));
   	}

	 public function insert()
	{

	 	return view('insert');


	}

	 public function updatedvalue($id)
	{
		//print_r($id);die;
		$path = storage_path() . "/json/restaurant.json"; //file path
		$currentvalue = json_decode(file_get_contents($path), true);//json to array
		$currentvaluep = $currentvalue[$id];
		print_r($currentvaluep);die;
		/*foreach($currentvalue as $lin) {
         echo $lin[$id];die;
       }*/
		$data=json_encode($currentvaluep);
		File::put($path,$data);
		//$a=array_replace($currentvalue,$currentvaluep);
		//print_r($a);die;


	
	}


}
-------------------------------------------
<?php

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/

// Route::get('/', function () {
//     return view('welcome');
// });
// Route::resource('nerds', 'NerdController');
// Auth::routes();

// Route::get('/home', 'HomeController@index')->name('home');

/*Auth::routes();
Route::resource('members','MemberController');
Route::middleware(['auth'])->group(function(){

	Route::get('/home', 'NerdController@index')->name('nerds');
	//Route::get('/', 'NerdController@index')->name('nerds');

	Route::resource('nerds', 'NerdController');
	Route::resource('task', 'TaskController');
	Route::resource('gulshan', 'InsertDataController');
	
	Route::get('/', function () {
	    return view('app');
	});
});
*/
Route::get('/', function () {
//$jsonData = json_decode(file_get_contents("services"), true);
//$user=\App\User::get()->tojson();
//$user=Response::Json($jsonData);	
//dd($jsonData);
	// $fbData = Storage::get('services.txt');
$path = storage_path() . "/json/restaurant.json"; // ie: /var/www/laravel/app/storage/json/filename.json

$json = json_decode(file_get_contents($path), true);
//dd($json);

return view('restaurant');
});

Route::get('bulkdata','jsonController@bulkdata');
Route::get('delete/{id}','jsonController@delete');
Route::get('show','jsonController@list');
Route::get('/Insertdata','jsonController@insert');
Route::post('/Insert','jsonController@bulkdata');
Route::get('update/{id}','jsonController@update');
Route::post('/update/{id}','jsonController@updatedvalue');




Route::resource('members','MemberController');
---------------------
restaurantblade
--------------------
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
                                                                                      
  <div class="table-responsive">          
  <table class="table">
    <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Update</th>
        <th>Delete</th>
       </tr>
    </thead>
    <tbody>
      <tr>
         @foreach($member as $key=>$user)
        
          <tr>
              <td>{{$user['id']}}</td>
              <td>{{$user['name']}}</td>
              <td><a href="/update/{{$key}}"><button>Update</button></a></td>
              <td><a href="/delete/{{$key}}"><button>Delete</button></a></td>
          </tr>

         @endforeach
      </tr>
    </tbody>
  </table>
  </div>
</div>

