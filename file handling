<?php

namespace App\Http\Controllers;


use Illuminate\Http\Request;
use Storage;
use File;
use view;
use App\User;
use Input;

class jsonController extends Controller
{
	public function bulkdata()
	{
		$path = storage_path() . "/json/restaurant.json";//file path
		$lines = file($path);//read file
		$decodedata = json_decode(file_get_contents($path), true);//json to array
		$keys = array_keys($decodedata);
        $last = end($keys);
   
	    $data = [
	         'id' => end($keys)+1,
	         'name' => Input::get("name") ];
	   
		array_push($decodedata,$data);//merge data
		$data = json_encode($decodedata);
		File::put($path,$data);

	}


	public function delete($id)
		{
		$path = storage_path() . "/json/restaurant.json";	
		$decodedata = json_decode(file_get_contents($path), true);
		//print_r($decodedata['4']);die;
		unset($decodedata[$id]);
		$data=json_encode($decodedata);
		File::put($path,$data);
		}
	public function list()
	    {

		$path = storage_path() . "/json/restaurant.json"; //file path
		$member = json_decode(file_get_contents($path), true);//json to array
		return view('restaurant',compact('member')); 

	 }

	public function update($id)
	{
		$path = storage_path() . "/json/restaurant.json"; //file path
		$currentvalue = json_decode(file_get_contents($path), true);//json to array
		//print_r($currentvalue);die;
		$currentvaluep = $currentvalue[$id];
		return view('update',compact('currentvalue'));
   	}

	 public function insert()
	{

	 	return view('insert');


	}

	 public function updatedvalue($id)
	{
		//print_r($id);die;
		$path = storage_path() . "/json/restaurant.json"; //file path
		$currentvalue = json_decode(file_get_contents($path), true);//json to array
		$currentvaluep = $currentvalue[$id];
		print_r($currentvaluep);die;
		/*foreach($currentvalue as $lin) {
         echo $lin[$id];die;
       }*/
		//$data=json_encode($currentvaluep);
		File::put($path,$data);
		//$a=array_replace($currentvalue,$currentvaluep);
		//print_r($a);die;


	
	}


}

